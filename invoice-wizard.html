<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invoice Wizard</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- pdf.js + tesseract.js already included here -->
</head>
<body>
  <section id="login-section">
    <form id="login-form" class="panel">
      <div class="field"><label>Username</label><input id="username" /></div>
      <div class="field"><label>Password</label><input id="password" type="password" /></div>
      <div class="field"><label>Doc Type</label><input id="doc-type" value="invoice" /></div>
      <button class="btn" type="submit">Login</button>
    </form>
  </section>

  <section id="dashboard" style="display:none">
    <div class="panel">
      <h2>Welcome</h2>
      <div class="actions">
        <button id="configure-btn" class="btn">Configure Wizard</button>
        <button id="demo-btn" class="btn">Run Demo</button>
        <button id="upload-btn" class="btn">Upload</button>
        <button id="logout-btn" class="btn">Logout</button>
      </div>

      <!-- NEW: Saved Wizard Models -->
      <div class="field">
        <label for="model-select">Saved Wizard Models</label>
        <select id="model-select">
          <option value="">— Select a saved model —</option>
        </select>
        <p class="sub">Pick a model and then drop files below to auto-extract.</p>
      </div>

      <div id="dropzone" class="dropzone">
        <p>Drop PDFs or images here</p>
        <input id="file-input" type="file" multiple hidden />
      </div>
    </div>
  </section>

  <section id="wizard-section" style="display:none">
    <div class="panel">
      <h2>Invoice Wizard</h2>
      <div id="promptBar">
        <span id="stepLabel"></span>
        <strong id="questionText"></strong>
      </div>

      <div id="pageControls">
        <button id="prevPageBtn" class="btn">Prev</button>
        <span id="pageIndicator"></span>
        <button id="nextPageBtn" class="btn">Next</button>
        <label><input type="checkbox" id="ocrToggle" /> Use OCR</label>
      </div>

      <canvas id="pdfCanvas"></canvas>
      <canvas id="imgCanvas"></canvas>
      <canvas id="overlayCanvas"></canvas>

      <div class="actions">
        <button id="boxModeBtn" class="btn">Box Mode</button>
        <button id="clearSelectionBtn" class="btn">Clear</button>
        <button id="backBtn" class="btn">Back</button>
        <button id="skipBtn" class="btn">Skip</button>
        <button id="confirmBtn" class="btn">Confirm</button>
        <button id="finishWizardBtn" class="btn">Save & Return</button>
      </div>

      <h3>Saved Fields</h3>
      <table><tbody id="fieldsTbody"></tbody></table>
      <pre id="savedJson"></pre>
      <button id="exportBtn" class="btn">Export JSON</button>
    </div>
  </section>

  <input id="wizard-file" type="file" hidden />
  <script src="invoice-wizard.js"></script>
</body>
</html>
