<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Invoice Wizard — WROKIT</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
    <nav class="tabs">
      <a href="index.html">Home</a>
      <a href="portfolio.html">Portfolio Preview</a>
      <a href="invoice-wizard.html" class="active">Invoice Wizard</a>
    </nav>

    <header class="header">
      <h1><span class="hash">#</span> Invoice <span class="braces">{</span><span class="accent">Wizard</span><span class="braces">}</span></h1>
      <p class="sub">Configure where your data lives by highlighting fields on your uploaded invoice — step by step.</p>
    </header>

    <main>
      <!-- Login -->
      <section id="login-section" class="panel">
        <h2>Login</h2>
        <form id="login-form">
          <div class="field">
            <label for="username">Username <span class="req">*</span></label>
            <input id="username" autocomplete="username" required>
          </div>
          <div class="field">
            <label for="password">Password <span class="req">*</span></label>
            <input id="password" type="password" autocomplete="current-password" required>
          </div>
          <p class="sub italic">
            Currently in demo mode. You may use any username and password to log in.
            No email or personal information is required, though creating a login will
            let you return to your saved information later.
          </p>
          <button type="submit" class="btn">Login</button>
        </form>
      </section>

      <!-- Dashboard -->
      <section id="dashboard" class="panel" style="display:none">
        <h2>Dashboard</h2>

        <div class="field">
          <label for="doc-type">Document Type</label>
          <select id="doc-type">
            <option value="invoice" selected>Invoice</option>
            <option value="product_inventory_sheet">Product Inventory Sheet</option>
          </select>
        </div>

        <div id="dropzone" class="dropzone">Drag &amp; Drop Files Here</div>
        <input id="file-input" type="file" accept="application/pdf,image/png,image/jpeg" style="display:none">

        <div class="actions">
          <button id="upload-btn" class="btn" style="display:none">Upload Documents</button>
          <button id="configure-btn" class="btn">Configure Wizard</button>
          <button id="demo-btn" class="btn">Demo Wizard</button>
          <button id="new-wizard-btn" class="btn" style="display:none">New Wizard</button>
          <button id="logout-btn" class="btn" type="button">Logout</button>
        </div>
      </section>

      <!-- Wizard (highlighter) -->
      <section id="wizard-section" class="panel" style="display:none">
        <h2>Wizard Configuration</h2>
        <p class="sub">
          Upload a standardized invoice page, then highlight each requested field.
          We’ll save the locations to a per-user schema for future auto-extraction.
        </p>

        <div class="field">
          <input id="wizard-file" type="file" accept="application/pdf,image/png,image/jpeg">
        </div>

        <div id="promptBar" class="prompt">
          <span id="stepLabel">Step 1/13</span>
          <strong id="questionText">Please highlight the order/invoice number.</strong>
        </div>

        <div id="viewer" class="viewer">
          <!-- One of these will be visible depending on file type -->
          <canvas id="pdfCanvas" class="docCanvas"></canvas>
          <img id="imgCanvas" class="docCanvas" style="display:none" />
          <!-- Overlay for drawing selections -->
          <canvas id="overlayCanvas" class="overlay"></canvas>
        </div>

        <div class="actions">
          <button id="boxModeBtn" class="btn">Box Mode</button>
          <button id="clearSelectionBtn" class="btn">Clear Selection</button>
          <button id="backBtn" class="btn">Back</button>
          <button id="skipBtn" class="btn">Skip</button>
          <button id="confirmBtn" class="btn primary">Confirm</button>
        </div>

        <details id="savedMap" class="panel minimal">
          <summary>Saved fields</summary>
          <pre id="savedJson" class="code"></pre>
          <button id="exportBtn" class="btn">Export JSON</button>
          <button id="finishWizardBtn" class="btn">Finish &amp; Return to Dashboard</button>
        </details>
      </section>
    </main>

    <footer class="footer">
      <p>Built as a client-side demo.</p>
    </footer>
  </div>

  <!-- pdf.js for in-browser PDF rendering -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js"></script>
  <script src="invoice-wizard.js"></script>
</body>
</html>
